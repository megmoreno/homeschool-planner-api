{"version":3,"sources":["../../src/util/map-query.ts"],"names":["queryFromInfo","selectionStateFromInfo","getIndirectType","addTypeSelectionsForField","type","context","info","state","selection","indirectPath","name","value","startsWith","pothosPrismaInclude","pothosPrismaSelect","pothosPrismaIndirectInclude","pothosPrismaModel","extensions","resolveIndirectInclude","path","resolvedType","field","isObjectType","mode","mergeSelection","select","undefined","include","selectionSet","addNestedSelections","includePath","resolve","length","rest","sel","selections","kind","Kind","FIELD","returnType","getNamedType","getFields","alias","FRAGMENT_SPREAD","fragments","typeCondition","schema","getType","INLINE_FRAGMENT","Error","addFieldSelection","fieldSelect","fieldSelectionMap","mappings","args","getArgumentValues","variableValues","rawQuery","indirectInclude","query","normalizedIndirectInclude","Array","isArray","normalizeInclude","fieldState","createStateForType","Object","keys","resolvedField","selectionToQuery","node","map","_","selectionCompatible","typeName","getTypeMap","fieldNodes","indirectType","indirectField","subPath","n","nested","setLoaderMappings","parentType","parent","targetType","fieldMap","pothosPrismaFieldMap","createState","currentType","normalized","fieldName","push"],"mappings":"AAAA,oCAAoC,GACpC,8BAA8B,GAC9B;;;;;;;;;;;IAkUgBA,aAAa,MAAbA;IAsDAC,sBAAsB,MAAtBA;IAkCAC,eAAe,MAAfA;;yBA7YT;2BAQ2B;4BAQ3B;AAEP,SAASC,0BACPC,IAAsB,EACtBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrBC,SAAoB,EACpBC,YAAsB,EACtB;IACA,IAAID,UAAUE,IAAI,CAACC,KAAK,CAACC,UAAU,CAAC,OAAO;QACzC;IACF,CAAC;QAOIR;IALL,MAAM,EACJS,oBAAmB,EACnBC,mBAAkB,EAClBC,4BAA2B,EAC3BC,kBAAiB,EAClB,GAAIZ,CAAAA,cAAAA,KAAKa,UAAU,cAAfb,yBAAAA,cAAmB,CAAC,CAAC;IAO1B,IAAIW,6BAA6B;QAC/BG,uBACEd,MACAE,MACAE,WACAO,4BAA4BI,IAAI,EAChCV,cACA,CAACW,cAAcC,OAAOF,OAAS;YAC7BhB,0BAA0BiB,cAAcf,SAASC,MAAMC,OAAOc,OAAOF;QACvE;IAEJ,CAAC;IAED,IAAI,CAACG,IAAAA,qBAAY,EAAClB,OAAO;QACvB;IACF,CAAC;IAED,IAAIY,qBAAqB,CAACF,oBAAoB;QAC5CP,MAAMgB,IAAI,GAAG;IACf,CAAC;IAED,IAAIV,uBAAuBC,oBAAoB;QAC7CU,IAAAA,0BAAc,EAACjB,OAAO;YACpBkB,QAAQX,qBAAqB;gBAAE,GAAGA,kBAAkB;YAAC,IAAIY,SAAS;YAClEC,SAASd,sBAAsB;gBAAE,GAAGA,mBAAmB;YAAC,IAAIa,SAAS;QACvE;IACF,CAAC;IAED,IAAIlB,UAAUoB,YAAY,EAAE;QAC1BC,oBAAoBzB,MAAMC,SAASC,MAAMC,OAAOC,UAAUoB,YAAY,EAAEnB;IAC1E,CAAC;AACH;AAEA,SAASS,uBACPd,IAAsB,EACtBE,IAAwB,EACxBE,SAAkE,EAClEsB,WAAoC,EACpCX,IAAc,EACdY,OAA2E,EAC3E;IACA,IAAID,YAAYE,MAAM,KAAK,GAAG;QAC5BD,QAAQ3B,MAAMI,WAAwBW;QACtC;IACF,CAAC;IAED,MAAM,CAACQ,SAAS,GAAGM,KAAK,GAAGH;IAC3B,IAAI,CAACtB,UAAUoB,YAAY,IAAI,CAACD,SAAS;QACvC;IACF,CAAC;IAED,KAAK,MAAMO,OAAO1B,UAAUoB,YAAY,CAACO,UAAU,CAAE;QACnD,OAAQD,IAAIE,IAAI;YACd,KAAKC,aAAI,CAACC,KAAK;gBACb,IAAIJ,IAAIxB,IAAI,CAACC,KAAK,KAAKgB,QAAQjB,IAAI,IAAIY,IAAAA,qBAAY,EAAClB,OAAO;wBAQ7C8B;oBAPZ,MAAMK,aAAaC,IAAAA,qBAAY,EAACpC,KAAKqC,SAAS,EAAE,CAACP,IAAIxB,IAAI,CAACC,KAAK,CAAC,CAACP,IAAI;wBAOzD8B;oBALZhB,uBACEqB,YACAjC,MACA4B,KACAD,MACA;2BAAId;wBAAMe,CAAAA,OAAAA,CAAAA,MAAAA,IAAIQ,KAAK,cAATR,iBAAAA,KAAAA,IAAAA,IAAWvB,KAAK,cAAhBuB,kBAAAA,OAAoBA,IAAIxB,IAAI,CAACC,KAAK;qBAAC,EAC7CoB;gBAEJ,CAAC;gBACD,QAAS;YACX,KAAKM,aAAI,CAACM,eAAe;gBACvB,IAAIrC,KAAKsC,SAAS,CAACV,IAAIxB,IAAI,CAACC,KAAK,CAAC,CAACkC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKgB,QAAQvB,IAAI,EAAE;oBAC5Ec,uBACEZ,KAAKwC,MAAM,CAACC,OAAO,CAACpB,QAAQvB,IAAI,GAChCE,MACAA,KAAKsC,SAAS,CAACV,IAAIxB,IAAI,CAACC,KAAK,CAAC,EAC9BmB,aACAX,MACAY;gBAEJ,CAAC;gBAED,QAAS;YAEX,KAAKM,aAAI,CAACW,eAAe;gBACvB,IAAI,CAACd,IAAIW,aAAa,IAAIX,IAAIW,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKgB,QAAQvB,IAAI,EAAE;oBACvEc,uBACEgB,IAAIW,aAAa,GAAGvC,KAAKwC,MAAM,CAACC,OAAO,CAACb,IAAIW,aAAa,CAACnC,IAAI,CAACC,KAAK,IAAKP,IAAI,EAC7EE,MACA4B,KACAJ,aACAX,MACAY;gBAEJ,CAAC;gBAED,QAAS;YAEX;gBACE,MAAM,IAAIkB,MAAM,CAAC,2BAA2B,EAAE,AAACzC,UAA+B4B,IAAI,CAAC,CAAC,EAAE;QAC1F;IACF;AACF;AAEA,SAASP,oBACPzB,IAAuB,EACvBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrB4B,UAA4B,EAC5B1B,YAAsB,EACtB;IACA,KAAK,MAAMD,aAAa2B,WAAWA,UAAU,CAAE;QAC7C,OAAQ3B,UAAU4B,IAAI;YACpB,KAAKC,aAAI,CAACC,KAAK;gBACbY,kBAAkB9C,MAAMC,SAASC,MAAMC,OAAOC,WAAWC;gBAEzD,QAAS;YACX,KAAK4B,aAAI,CAACM,eAAe;gBACvB,IAAIrC,KAAKsC,SAAS,CAACpC,UAAUE,IAAI,CAACC,KAAK,CAAC,CAACkC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKP,KAAKM,IAAI,EAAE;oBAC/E,QAAS;gBACX,CAAC;gBAEDmB,oBACEzB,MACAC,SACAC,MACAC,OACAD,KAAKsC,SAAS,CAACpC,UAAUE,IAAI,CAACC,KAAK,CAAC,CAACiB,YAAY,EACjDnB;gBAGF,QAAS;YAEX,KAAK4B,aAAI,CAACW,eAAe;gBACvB,IAAIxC,UAAUqC,aAAa,IAAIrC,UAAUqC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKP,KAAKM,IAAI,EAAE;oBAC/E,QAAS;gBACX,CAAC;gBAEDmB,oBAAoBzB,MAAMC,SAASC,MAAMC,OAAOC,UAAUoB,YAAY,EAAEnB;gBAExE,QAAS;YAEX;gBACE,MAAM,IAAIwC,MAAM,CAAC,2BAA2B,EAAE,AAACzC,UAA+B4B,IAAI,CAAC,CAAC,EAAE;QAC1F;IACF;AACF;AAEA,SAASc,kBACP9C,IAAuB,EACvBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrBC,SAAoB,EACpBC,YAAsB,EACtB;QAWoBY;IAVpB,IAAIb,UAAUE,IAAI,CAACC,KAAK,CAACC,UAAU,CAAC,OAAO;QACzC;IACF,CAAC;IAED,MAAMS,QAAQjB,KAAKqC,SAAS,EAAE,CAACjC,UAAUE,IAAI,CAACC,KAAK,CAAC;IAEpD,IAAI,CAACU,OAAO;QACV,MAAM,IAAI4B,MAAM,CAAC,cAAc,EAAEzC,UAAUE,IAAI,CAACC,KAAK,CAAC,IAAI,EAAEP,KAAKM,IAAI,CAAC,CAAC,EAAE;IAC3E,CAAC;IAED,MAAMyC,cAAc9B,CAAAA,MAAAA,MAAMJ,UAAU,cAAhBI,iBAAAA,KAAAA,IAAAA,IAAkBP,kBAAkB;IAExD,IAAIsC;IAEJ,IAAIC,WAA2B,CAAC;IAEhC,IAAI,OAAOF,gBAAgB,YAAY;QACrC,MAAMG,OAAOC,IAAAA,0BAAiB,EAAClC,OAAOb,WAAWF,KAAKkD,cAAc;QAKpEJ,oBAAoBD,YAClBG,MACAjD,SACA,CAACoD,UAAUC,kBAAoB;YAC7B,MAAMnB,aAAaC,IAAAA,qBAAY,EAACnB,MAAMjB,IAAI;YAC1C,MAAMuD,QAAQ,OAAOF,aAAa,aAAaA,SAASH,MAAMjD,WAAWoD,QAAQ;YAEjF,MAAMG,4BAA4BC,MAAMC,OAAO,CAACJ,mBAC5CK,iBAAiBL,iBAAiBxD,gBAAgBqC,YAAYjC,SAC9DoD,eAAe;YAEnB,MAAMM,aAAaC,mBACjB/D,gBACE0D,4BACItD,KAAKwC,MAAM,CAACC,OAAO,CAACa,0BAA0Bb,OAAO,MACrDR,UAAU,EACdjC,OAEFA,MACAC;YAGF,IAAI,OAAOoD,UAAU,YAAYO,OAAOC,IAAI,CAACR,OAAO3B,MAAM,GAAG,GAAG;gBAC9DR,IAAAA,0BAAc,EAACwC,YAAY;oBAAEvC,QAAQ,CAAC;oBAAG,GAAGkC,KAAK;gBAAC;YACpD,CAAC;YAED,IAAIC,6BAA6BA,0BAA0BzC,IAAI,CAACa,MAAM,GAAG,GAAG;oBAMjEO,KAAD;oBAAA;gBALRrB,uBACEqB,YACAjC,MACAE,WACA;uBACM,CAAA,OAAA,CAAA,OAAC+B,CAAAA,MAAAA,WAAWtB,UAAU,cAArBsB,iBAAAA,KAAAA,IAAAA,IAAuBxB,2BAA2B,cAAnD,kBAAA,KAAA,IAAA,KAAsEI,IAAI,cAA1E,kBAAA,OAA8E,EAAE;uBACjFyC,0BAA0BzC,IAAI;iBAClC,EACD,EAAE,EACF,CAACC,cAAcgD,eAAejD,OAAS;oBACrChB,0BACEiB,cACAf,SACAC,MACA0D,YACAI,eACAjD;gBAEJ;YAEJ,CAAC;YAEDhB,0BAA0BoC,YAAYlC,SAASC,MAAM0D,YAAYxD,WAAW,EAAE;YAE9E,gDAAgD;YAChD6C,WAAWW,WAAWX,QAAQ;YAE9B,OAAOgB,IAAAA,4BAAgB,EAACL;QAC1B,GACA,CAAC7C,OAAS;YACR,MAAMoB,aAAaC,IAAAA,qBAAY,EAACnB,MAAMjB,IAAI;YAC1C,IAAIkE,OAAyB,IAAI;YAEjCpD,uBACEqB,YACAjC,MACAE,WACAW,KAAKoD,GAAG,CAAC,CAAC7D,OAAU,CAAA;oBAClBA;gBACF,CAAA,IACA,EAAE,EACF,CAAC8D,GAAGJ,gBAAkB;gBACpBE,OAAOF;YACT;YAGF,OAAOE;QACT;IAEJ,OAAO;QACLlB,oBAAoB;YAAE3B,QAAQ0B;QAAY;IAC5C,CAAC;IAED,IAAIA,eAAesB,IAAAA,+BAAmB,EAAClE,OAAO6C,mBAAmB,IAAI,GAAG;YAEvD5C;QADfgB,IAAAA,0BAAc,EAACjB,OAAO6C;YACP5C;QAAfD,MAAM8C,QAAQ,CAAC7C,CAAAA,OAAAA,CAAAA,OAAAA,UAAUkC,KAAK,cAAflC,kBAAAA,KAAAA,IAAAA,KAAiBG,KAAK,cAAtBH,kBAAAA,OAA0BA,UAAUE,IAAI,CAACC,KAAK,CAAC,GAAG;YAC/DU,OAAOb,UAAUE,IAAI,CAACC,KAAK;YAC3BP,MAAMA,KAAKM,IAAI;YACf2C;YACA5C;QACF;IACF,CAAC;AACH;AAEO,SAAST,cAAwE,EACtFK,QAAO,EACPC,KAAI,EACJoE,SAAQ,EACRjD,OAAM,EACNN,MAAO,EAAE,CAAA,EAOV,EAAoC;IACnC,MAAMoB,aAAaC,IAAAA,qBAAY,EAAClC,KAAKiC,UAAU;IAC/C,MAAMnC,OAAOsE,WAAWpE,KAAKwC,MAAM,CAAC6B,UAAU,EAAE,CAACD,SAAS,GAAGnC,UAAU;IACvE,MAAMhC,QAAQ0D,mBAAmB7D,MAAME;IAEvC,IAAImB,QAAQ;QACVD,IAAAA,0BAAc,EAACjB,OAAO;YAAEkB;QAAO;IACjC,CAAC;IAED,IAAIN,KAAKa,MAAM,GAAG,GAAG;YACsBO;QAAzC,MAAM,EAAExB,4BAA2B,EAAE,GAAIwB,CAAAA,cAAAA,WAAWtB,UAAU,cAArBsB,yBAAAA,cAAyB,CAAC,CAAC;YAQlExB;QAJFG,uBACEqB,YACAjC,MACAA,KAAKsE,UAAU,CAAC,EAAE,EAClB7D,CAAAA,MAAAA,wCAAAA,yCAAAA,KAAAA,IAAAA,4BAA6BI,IAAI,cAAjCJ,iBAAAA,MAAqC,EAAE,EACvC,EAAE,EACF,CAAC8D,cAAcC,eAAeC,UAAY;YACxC7D,uBACE2D,cACAvE,MACAwE,eACA3D,KAAKoD,GAAG,CAAC,CAACS,IAAO,OAAOA,MAAM,WAAW;oBAAEtE,MAAMsE;gBAAE,IAAIA,CAAC,GACxDD,SACA,CAAC3D,cAAcgD,eAAea,SAAW;gBACvC9E,0BAA0BiB,cAAcf,SAASC,MAAMC,OAAO6D,eAAea;YAC/E;QAEJ;IAEJ,OAAO;QACL9E,0BAA0BC,MAAMC,SAASC,MAAMC,OAAOD,KAAKsE,UAAU,CAAC,EAAE,EAAE,EAAE;IAC9E,CAAC;IAEDM,IAAAA,4BAAiB,EAAC7E,SAASC,MAAMC,MAAM8C,QAAQ;IAE/C,OAAOgB,IAAAA,4BAAgB,EAAC9D;AAC1B;AAEO,SAASN,uBACdI,OAAe,EACfC,IAAwB,EACxBoE,QAAiB,EACjB;IACA,MAAMtE,OAAOsE,WAAWpE,KAAKwC,MAAM,CAAC6B,UAAU,EAAE,CAACD,SAAS,GAAGpE,KAAK6E,UAAU;IAE5E,MAAM5E,QAAQ0D,mBAAmB7D,MAAME;IAEvC,IAAI,CAACgB,IAAAA,qBAAY,EAAClB,OAAO;QACvB,MAAM,IAAI6C,MAAM,4DAA4D;IAC9E,CAAC;IAEDC,kBAAkB9C,MAAMC,SAASC,MAAMC,OAAOD,KAAKsE,UAAU,CAAC,EAAE,EAAE,EAAE;IAEpE,OAAOrE;AACT;AAEA,SAAS0D,mBACP7D,IAAsB,EACtBE,IAAwB,EACxB8E,MAAuB,EACvB;QAGiBC,KAIfA;IANF,MAAMA,aAAanF,gBAAgBE,MAAME;IAEzC,MAAMgF,WAAWD,CAAAA,MAAAA,WAAWpE,UAAU,cAArBoE,iBAAAA,KAAAA,IAAAA,IAAuBE,oBAAoB;IAE5D,OAAOC,IAAAA,uBAAW,EAChBF,UACAD,CAAAA,CAAAA,OAAAA,WAAWpE,UAAU,cAArBoE,kBAAAA,KAAAA,IAAAA,KAAuBvE,kBAAkB,AAAD,IAAI,WAAW,SAAS,EAChEsE;AAEJ;AAEO,SAASlF,gBAAgBE,IAAsB,EAAEE,IAAwB,EAAE;QAGzE+E;IAFP,IAAIA,aAAajF;IAEjB,MAAOiF,CAAAA,MAAAA,WAAWpE,UAAU,cAArBoE,iBAAAA,KAAAA,IAAAA,IAAuBtE,2BAA2B,CAAE;YAEtDsE;QADHA,aAAa/E,KAAKwC,MAAM,CAACC,OAAO,CAC9B,CAACsC,CAAAA,OAAAA,WAAWpE,UAAU,cAArBoE,kBAAAA,KAAAA,IAAAA,KAAuBtE,2BAA2B,AAAmB,EAAEgC,OAAO;IAEnF;IAEA,OAAOsC;AACT;AAEA,SAAStB,iBAAiB5C,IAAc,EAAEf,IAAsB,EAAE;IAChE,IAAIqF,cAAcrF;IAElB,MAAMsF,aAA+C,EAAE;IAEvD,IAAI,CAACpE,IAAAA,qBAAY,EAACmE,cAAc;QAC9B,MAAM,IAAIxC,MAAM,CAAC,SAAS,EAAEwC,YAAY,qBAAqB,CAAC,EAAE;IAClE,CAAC;IAED,KAAK,MAAME,aAAaxE,KAAM;QAC5B,MAAME,QAAwCoE,YAAYhD,SAAS,EAAE,CAACkD,UAAU;QAEhF,IAAI,CAACtE,OAAO;YACV,MAAM,IAAI4B,MAAM,CAAC,SAAS,EAAEwC,YAAY,iBAAiB,EAAEE,UAAU,CAAC,EAAE;QAC1E,CAAC;QAEDF,cAAcjD,IAAAA,qBAAY,EAACnB,MAAMjB,IAAI;QAErC,IAAI,CAACkB,IAAAA,qBAAY,EAACmE,cAAc;YAC9B,MAAM,IAAIxC,MAAM,CAAC,SAAS,EAAEwC,YAAY,qBAAqB,CAAC,EAAE;QAClE,CAAC;QAEDC,WAAWE,IAAI,CAAC;YAAElF,MAAMiF;YAAWvF,MAAMqF,YAAY/E,IAAI;QAAC;IAC5D;IAEA,OAAO;QACLqC,SAAS,IAAO2C,WAAW1D,MAAM,GAAG,IAAI0D,UAAU,CAACA,WAAW1D,MAAM,GAAG,EAAE,CAAC5B,IAAI,GAAGA,KAAKM,IAAI;QAC1FS,MAAMuE;IACR;AACF"}